//-----------------------------------------------------------------------------//
// Import
//-----------------------------------------------------------------------------//

const _    = require('lodash');
const User = require('../model/user.js');

//-----------------------------------------------------------------------------//
// API Route
//-----------------------------------------------------------------------------//

const route = function(app){
    app.route('/api/rank')
        .get(function (req, res) {
            User.find({}
                , ['username', 'coin']
                , {
                    sort: {
                        coin: -1 
                    }
                }, function(err, docs){
                
                    if(err){
                        res.status(400).send('Could not update player data');
                    }else{
                        res.send(docs);
                    }
            });
        })
}

//-----------------------------------------------------------------------------//
// Import
//-----------------------------------------------------------------------------//

module.exports = route;

//-----------------------------------------------------------------------------//